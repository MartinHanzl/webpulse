version: 1
applications:
  - appRoot: frontend/admin
    frontend:
      phases:
        preBuild:
          commands:
            - npm install
        build:
          commands:
            - mkdir -p frontend/admin/.output/public
            - ls -la frontend/admin/.output
            - npm run generate
            - ls -la frontend/admin/.output/public
      artifacts:
        baseDirectory: frontend/admin/.output/public
        files:
          - '**/*'
      cache:
        paths:
          - frontend/admin/node_modules/**/*
    name: admin
    domain: admin.martinhanzl.cz

  - appRoot: frontend/client
    frontend:
      phases:
        preBuild:
          commands:
            - npm install
        build:
          commands:
            - mkdir -p frontend/client/.output/public
            - ls -la frontend/client/.output
            - npm run generate
            - ls -la frontend/client/.output/public
      artifacts:
        baseDirectory: frontend/client/.output/public
        files:
          - '**/*'
      cache:
        paths:
          - frontend/client/node_modules/**/*
    name: client
    domain: martinhanzl.cz