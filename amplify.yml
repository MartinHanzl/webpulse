version: 1
env:
  variables:
    PROJECT_PATH: admin

frontend:
  phases:
    preBuild:
      commands:
        - echo "Entering main repo folder..."
        - cd webpulse
        - echo "Installing dependencies for $PROJECT_PATH..."
        - cd $PROJECT_PATH
        - npm install
    build:
      commands:
        - echo "Building $PROJECT_PATH..."
        - cd webpulse/$PROJECT_PATH
        - npm run build
  artifacts:
    baseDirectory: webpulse/$PROJECT_PATH/.output/public
    files:
      - '**/*'
  cache:
    paths:
      - webpulse/$PROJECT_PATH/node_modules/**/*
  customHeaders:
    - pattern: '**/*'
      headers:
        - key: Cache-Control
          value: max-age=0, no-cache, no-store, must-revalidate
